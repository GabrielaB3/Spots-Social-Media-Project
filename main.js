!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_invalid",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,n)=>{(e=>e.some(e=>!e.validity.valid))(e)?o(t,n):(t.disabled=!1,t.classList.remove(n.inactiveButtonClass))},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=document.querySelector(".profile__edit-button"),r=document.querySelector("#edit-profile-modal"),a=r.querySelector(".modal__close-btn"),c=document.forms["profile-form"],l=r.querySelector("#profile-name-input"),s=r.querySelector("#profile-description-inpput"),i=document.querySelector("#preview-modal"),u=(i.querySelector(".modal__close-btn"),i.querySelector(".modal__image")),d=i.querySelector(".modal__caption"),m=document.querySelector(".profile__add-button"),p=document.querySelector("#new-post-modal"),f=p.querySelector(".modal__close-btn"),_=p.querySelector(".modal__form"),y=p.querySelector(".modal__submit-btn"),v=p.querySelector("#card-image-input"),S=p.querySelector("#card-caption-input"),q=document.querySelector(".profile__name"),g=document.querySelector(".profile__description"),b=document.querySelector("#card-template").content.querySelector(".card"),h=document.querySelector(".cards__list");function w(e){const t=b.cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name;const r=t.querySelector(".card__like-button");return r.addEventListener("click",()=>{r.classList.toggle("card__like-button_active")}),t.querySelector(".card__delete-button").addEventListener("click",()=>{t.remove()}),n.addEventListener("click",()=>{u.src=e.link,u.alt=e.name,d.textContent=e.name,E(i)}),t}function k(e){if("Escape"===e.key){const e=document.querySelector(".modal.modal_opened");e&&L(e)}}function E(e){e.classList.add("modal_opened"),document.addEventListener("keydown",k)}function L(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",k)}var x;document.querySelectorAll(".modal__close").forEach(e=>{const t=e.closest(".modal");e.addEventListener("click",()=>L(t))}),n.addEventListener("click",function(){l.value=q.textContent,s.value=g.textContent,E(r),resetValidation(c,[l,s],e)}),a.addEventListener("click",function(){L(r)}),m.addEventListener("click",function(){E(p)}),f.addEventListener("click",function(){L(p)}),c.addEventListener("submit",function(e){e.preventDefault(),q.textContent=l.value,g.textContent=s.value,L(r)}),_.addEventListener("submit",function(t){t.preventDefault();const o=w({name:S.value,link:v.value});h.prepend(o),t.target.reset(),L(p),disableButton(y,e)}),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(function(e){const t=w(e);h.append(t)}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target.classList.contains("modal")&&L(e)})}),x=e,document.querySelectorAll(x.formSelector).forEach(e=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),r=e.querySelector(o.submitButtonSelector);t(n,r,o),n.forEach(a=>{a.addEventListener("input",function(){((e,t,o)=>{t.validity.valid?((e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)})(e,t,o):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,o)})(e,a,o),t(n,r,o)})})})(e,x)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UixpQkFBaUIsUUFBVUksSUFDM0JBLEVBQU1nQixPQUFPNUQsVUFBVWdFLFNBQVMsVUFDbENqQixFQUFXQyxPRG5GZ0J4RCxFQzJHaEJWLEVEMUdDdUIsU0FBUzZDLGlCQUFpQjFELEVBQU9ULGNBQ3pDb0UsUUFBU2MsSUFsQk9DLEVBQUNELEVBQVF6RSxLQUNqQyxNQUFNRixFQUFZNkUsTUFBTUMsS0FBS0gsRUFBT2YsaUJBQWlCMUQsRUFBT1IsZ0JBQ3REa0IsRUFBZ0IrRCxFQUFPM0QsY0FBY2QsRUFBT1Asc0JBR2xESSxFQUFrQkMsRUFBV1ksRUFBZVYsR0FHNUNGLEVBQVU2RCxRQUFTa0IsSUFDakJBLEVBQWE3QixpQkFBaUIsUUFBUyxXQTVDaEI4QixFQUFDTCxFQUFRTSxFQUFTL0UsS0FDeEMrRSxFQUFRNUUsU0FBU0MsTUFQQzRFLEVBQUNQLEVBQVFNLEVBQVMvRSxLQUNwQnlFLEVBQU8zRCxjQUFjLElBQUlpRSxFQUFRRSxZQUN6Q25DLFlBQWMsR0FDekJpQyxFQUFRdkUsVUFBVUMsT0FBT1QsRUFBT0wsa0JBTzlCcUYsQ0FBZVAsRUFBUU0sRUFBUy9FLEdBaEJia0YsRUFBQ1QsRUFBUU0sRUFBU0ksRUFBVW5GLEtBQzlCeUUsRUFBTzNELGNBQWMsSUFBSWlFLEVBQVFFLFlBQ3pDbkMsWUFBY3FDLEVBQ3pCSixFQUFRdkUsVUFBVUcsSUFBSVgsRUFBT0wsa0JBVzdCdUYsQ0FBZVQsRUFBUU0sRUFBU0EsRUFBUUssa0JBQW1CcEYsSUEyQ3ZEOEUsQ0FBbUJMLEVBQVFJLEVBQWM3RSxHQUN6Q0gsRUFBa0JDLEVBQVdZLEVBQWVWLEVBQzlDLE1BT0YwRSxDQUFrQkQsRUFBUXpFLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0LXNwcmludC02LS8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJvamVjdC1zcHJpbnQtNi0vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2ludmFsaWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCJcbn1cblxuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuIGlmKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gIGRpc2FibGVCdXR0b24oYnV0dG9uRWwsIGNvbmZpZyk7XG4gfSBlbHNlIHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gfVxufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59XG5cbmNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWwsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiB9KTtcbn07XG5cblxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHNldHRpbmdzIH0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy83LXBob3RvLWJ5LWdyaWZmaW4td29vbGRyaWRnZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IGVkaXRQcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQ2xvc2VCdG4gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGVkaXRQcm9maWxlZm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xuY29uc3QgZWRpdFByb2ZpbGVOYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiXG4pO1xuY29uc3QgZWRpdERlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wcHV0XCJcbik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENsb3NlQnRuID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZUVsID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld0NhcHRpb25FbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG5jb25zdCBuZXdQb3N0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1tb2RhbFwiKTtcbmNvbnN0IG5ld1Bvc3RDbG9zZUJ0biA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBhZGRDYXJkU3VibWl0QnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZS1pbnB1dFwiKTtcbmNvbnN0IGNhcmRDYXB0aW9uSW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNhcHRpb24taW5wdXRcIik7XG5cbmNvbnN0IHByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZFRpdGxlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gIGNhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuXG4gIGNvbnN0IGNhcmRMaWtlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICBjYXJkTGlrZUJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdG5FbC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9KTtcblxuICBjb25zdCBjYXJkRGVsZXRlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gIGNhcmREZWxldGVCdG5FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByZXZpZXdJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3SW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld0NhcHRpb25FbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbF9fY2xvc2UnKTtcblxuY2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICBjb25zdCBwb3B1cCA9IGJ1dHRvbi5jbG9zZXN0KCcubW9kYWwnKTtcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY2xvc2VNb2RhbChwb3B1cCkpO1xufSk7XG5cblxuXG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQ7XG4gIGVkaXREZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQ7XG5cbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xuXG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0UHJvZmlsZWZvcm0sIFtlZGl0UHJvZmlsZU5hbWVJbnB1dCwgZWRpdERlc2NyaXB0aW9uSW5wdXRdLCBzZXR0aW5ncyk7XG59KTtcblxuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxubmV3UG9zdENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBlZGl0RGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcblxufVxuXG5lZGl0UHJvZmlsZWZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHsgbmFtZTogY2FyZENhcHRpb25JbnB1dC52YWx1ZSwgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZSB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZExpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gIGV2dC50YXJnZXQucmVzZXQoKVxuXG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbiAgZGlzYWJsZUJ1dHRvbihhZGRDYXJkU3VibWl0QnRuLCBzZXR0aW5ncyk7XG59XG5cbmFkZENhcmRGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcblxuaW5pdGlhbENhcmRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZExpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwnKS5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbCcpKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwubW9kYWxfb3BlbmVkJyk7XG4gICAgaWYgKG9wZW5lZE1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsX29wZW5lZCcpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjQ2xvc2UpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX29wZW5lZCcpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjQ2xvc2UpO1xufVxuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTsiXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWwiLCJjb25maWciLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYnV0dG9uRWxlbWVudCIsImFkZCIsImVkaXRQcm9maWxlQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRQcm9maWxlQ2xvc2VCdG4iLCJlZGl0UHJvZmlsZWZvcm0iLCJmb3JtcyIsImVkaXRQcm9maWxlTmFtZUlucHV0IiwiZWRpdERlc2NyaXB0aW9uSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2VFbCIsInByZXZpZXdDYXB0aW9uRWwiLCJuZXdQb3N0QnRuIiwibmV3UG9zdE1vZGFsIiwibmV3UG9zdENsb3NlQnRuIiwiYWRkQ2FyZEZvcm1FbCIsImFkZENhcmRTdWJtaXRCdG4iLCJjYXJkTGlua0lucHV0IiwiY2FyZENhcHRpb25JbnB1dCIsInByb2ZpbGVOYW1lRWwiLCJwcm9maWxlRGVzY3JpcHRpb25FbCIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjYXJkTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwiY2FyZFRpdGxlRWwiLCJjYXJkSW1hZ2VFbCIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwidGV4dENvbnRlbnQiLCJjYXJkTGlrZUJ0bkVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZSIsIm9wZW5Nb2RhbCIsImhhbmRsZUVzY0Nsb3NlIiwiZXZlbnQiLCJrZXkiLCJvcGVuZWRNb2RhbCIsImNsb3NlTW9kYWwiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ1dHRvbiIsInBvcHVwIiwiY2xvc2VzdCIsInZhbHVlIiwicmVzZXRWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJwcmVwZW5kIiwidGFyZ2V0IiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIiwiY29udGFpbnMiLCJmb3JtRWwiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWwiLCJoaWRlSW5wdXRFcnJvciIsImlkIiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==